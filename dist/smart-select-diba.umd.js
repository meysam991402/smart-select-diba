(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.SmartSelect={},i.Vue))})(this,function(i,e){"use strict";const h=(t,l)=>{const o=t.__vccOpts||t;for(const[m,s]of l)o[m]=s;return o},y={class:"smart-select-input-wrapper"},S=["placeholder"],w=["placeholder"],I={key:0,class:"no-items"},V=["onMousedown"],E=h({__name:"SmartSelect",props:{options:{type:Array,default:()=>[]},keyLabel:{type:String,default:"title"},labelPlaceholder:{type:String,default:"لطفا یک گزینه انتخاب کنید"},labelSearch:{type:String,default:"جستجو ..."},labelNoItems:{type:String,default:"ایتمی برای نمایش وجود ندارد"},valueDefault:{type:Object,default:null}},emits:["selected","remove"],setup(t,{emit:l}){const o=t,m=l,s=e.ref(!1),a=e.ref(""),n=e.ref(o.valueDefault?o.valueDefault[o.keyLabel]:""),u=e.ref(o.valueDefault),f=e.ref(null),p=e.ref(null);function b(){return a.value?o.options.filter(r=>r[o.keyLabel].toLowerCase().includes(a.value.toLowerCase())):o.options}function x(r){n.value=r[o.keyLabel],u.value=r,a.value="",m("selected",r),s.value=!1}function R(){n.value="",a.value="",u.value=null,m("remove",null),s.value=!1}function T(){s.value=!0}function k(r){!f.value.contains(r.target)&&(!p.value||!p.value.contains(r.target))&&(s.value=!1)}return e.onMounted(()=>{document.addEventListener("mousedown",k)}),e.onBeforeUnmount(()=>{document.removeEventListener("mousedown",k)}),(r,c)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:c[3]||(c[3]=e.withModifiers(()=>{},["prevent"])),class:"smart-select-form"},[e.createElementVNode("div",y,[e.withDirectives(e.createElementVNode("input",{ref_key:"inputRef",ref:f,type:"text",readonly:"",placeholder:t.labelPlaceholder,"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),onClick:T,class:"smart-select-input"},null,8,S),[[e.vModelText,n.value]]),n.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",onClick:R,"aria-label":"حذف انتخاب",class:"smart-select-clear-btn"}," × ")):e.createCommentVNode("",!0)]),s.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"dropdownRef",ref:p,class:"smart-select-dropdown"},[e.withDirectives(e.createElementVNode("input",{type:"search","onUpdate:modelValue":c[1]||(c[1]=d=>a.value=d),placeholder:t.labelSearch,class:"smart-select-search"},null,8,w),[[e.vModelText,a.value]]),e.createElementVNode("ul",{class:"smart-select-list",onMousedown:c[2]||(c[2]=e.withModifiers(()=>{},["prevent"]))},[b().length===0?(e.openBlock(),e.createElementBlock("li",I,e.toDisplayString(t.labelNoItems),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b(),(d,P)=>(e.openBlock(),e.createElementBlock("li",{key:P,class:"smart-select-item"},[e.createElementVNode("button",{type:"button",class:"smart-select-item-btn",onMousedown:e.withModifiers(j=>x(d),["prevent"])},e.toDisplayString(d[t.keyLabel]),41,V)]))),128))],32)],512)):e.createCommentVNode("",!0)],32))}},[["__scopeId","data-v-2ffade35"]]),B={name:"SmartSelect",props:{options:{type:Array,default:()=>[]},keyLabel:{type:String,default:"title"},labelPlaceholder:{type:String,default:"لطفا یک گزینه انتخاب کنید"},labelSearch:{type:String,default:"جستجو ..."},labelNoItems:{type:String,default:"ایتمی برای نمایش وجود ندارد"},valueDefault:{type:Object,default:null}},data(){return{showSubMenu:!1,searchItem:"",labelItem:this.valueDefault?this.valueDefault[this.keyLabel]:"",valueItem:this.valueDefault}},computed:{filteredOptions(){return this.searchItem?this.options.filter(t=>t[this.keyLabel].toLowerCase().includes(this.searchItem.toLowerCase())):this.options}},methods:{setValueInput(t){this.labelItem=t[this.keyLabel],this.valueItem=t,this.searchItem="",this.$emit("selected",t),this.showSubMenu=!1},removeValueSelectItem(){this.labelItem="",this.searchItem="",this.valueItem=null,this.$emit("remove",null),this.showSubMenu=!1},onClickInput(){this.showSubMenu=!0},onClickOutside(t){!this.$refs.inputRef.contains(t.target)&&(!this.$refs.dropdownRef||!this.$refs.dropdownRef.contains(t.target))&&(this.showSubMenu=!1)}},mounted(){document.addEventListener("mousedown",this.onClickOutside)},beforeDestroy(){document.removeEventListener("mousedown",this.onClickOutside)}},M={class:"smart-select-input-wrapper"},g=["placeholder"],C={key:0,ref:"dropdownRef",class:"smart-select-dropdown"},L=["placeholder"],N={key:0,class:"no-items"},_=["onMousedown"];function D(t,l,o,m,s,a){return e.openBlock(),e.createElementBlock("form",{onSubmit:l[5]||(l[5]=e.withModifiers(()=>{},["prevent"])),class:"smart-select-form"},[e.createElementVNode("div",M,[e.withDirectives(e.createElementVNode("input",{ref:"inputRef",type:"text",readonly:"",placeholder:o.labelPlaceholder,"onUpdate:modelValue":l[0]||(l[0]=n=>s.labelItem=n),onClick:l[1]||(l[1]=(...n)=>a.onClickInput&&a.onClickInput(...n)),class:"smart-select-input"},null,8,g),[[e.vModelText,s.labelItem]]),s.labelItem?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",onClick:l[2]||(l[2]=(...n)=>a.removeValueSelectItem&&a.removeValueSelectItem(...n)),"aria-label":"حذف انتخاب",class:"smart-select-clear-btn"}," × ")):e.createCommentVNode("",!0)]),s.showSubMenu?(e.openBlock(),e.createElementBlock("div",C,[e.withDirectives(e.createElementVNode("input",{type:"search","onUpdate:modelValue":l[3]||(l[3]=n=>s.searchItem=n),placeholder:o.labelSearch,class:"smart-select-search"},null,8,L),[[e.vModelText,s.searchItem]]),e.createElementVNode("ul",{class:"smart-select-list",onMousedown:l[4]||(l[4]=e.withModifiers(()=>{},["prevent"]))},[a.filteredOptions.length===0?(e.openBlock(),e.createElementBlock("li",N,e.toDisplayString(o.labelNoItems),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.filteredOptions,(n,u)=>(e.openBlock(),e.createElementBlock("li",{key:u,class:"smart-select-item"},[e.createElementVNode("button",{type:"button",class:"smart-select-item-btn",onMousedown:e.withModifiers(f=>a.setValueInput(n),["prevent"])},e.toDisplayString(n[o.keyLabel]),41,_)]))),128))],32)],512)):e.createCommentVNode("",!0)],32)}const O=h(B,[["render",D],["__scopeId","data-v-f262eb8e"]]);i.SmartSelectVue2=O,i.SmartSelectVue3=E,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
