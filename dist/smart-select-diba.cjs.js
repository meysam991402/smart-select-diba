"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),h=(t,l)=>{const o=t.__vccOpts||t;for(const[c,s]of l)o[c]=s;return o},w={class:"smart-select-input-wrapper"},I=["placeholder"],V=["placeholder"],E={key:0,class:"no-items"},B=["onMousedown"],M={__name:"SmartSelect",props:{options:{type:Array,default:()=>[]},keyLabel:{type:String,default:"title"},labelPlaceholder:{type:String,default:"لطفا یک گزینه انتخاب کنید"},labelSearch:{type:String,default:"جستجو ..."},labelNoItems:{type:String,default:"ایتمی برای نمایش وجود ندارد"},valueDefault:{type:Object,default:null}},emits:["selected","remove"],setup(t,{emit:l}){const o=t,c=l,s=e.ref(!1),a=e.ref(""),n=e.ref(o.valueDefault?o.valueDefault[o.keyLabel]:""),d=e.ref(o.valueDefault),m=e.ref(null),f=e.ref(null);function p(){return a.value?o.options.filter(r=>r[o.keyLabel].toLowerCase().includes(a.value.toLowerCase())):o.options}function b(r){n.value=r[o.keyLabel],d.value=r,a.value="",c("selected",r),s.value=!1}function k(){n.value="",a.value="",d.value=null,c("remove",null),s.value=!1}function y(){s.value=!0}function v(r){!m.value.contains(r.target)&&(!f.value||!f.value.contains(r.target))&&(s.value=!1)}return e.onMounted(()=>{document.addEventListener("mousedown",v)}),e.onBeforeUnmount(()=>{document.removeEventListener("mousedown",v)}),(r,u)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:u[3]||(u[3]=e.withModifiers(()=>{},["prevent"])),class:"smart-select-form"},[e.createElementVNode("div",w,[e.withDirectives(e.createElementVNode("input",{ref_key:"inputRef",ref:m,type:"text",readonly:"",placeholder:t.labelPlaceholder,"onUpdate:modelValue":u[0]||(u[0]=i=>n.value=i),onClick:y,class:"smart-select-input"},null,8,I),[[e.vModelText,n.value]]),n.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",onClick:k,"aria-label":"حذف انتخاب",class:"smart-select-clear-btn"}," × ")):e.createCommentVNode("",!0)]),s.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"dropdownRef",ref:f,class:"smart-select-dropdown"},[e.withDirectives(e.createElementVNode("input",{type:"search","onUpdate:modelValue":u[1]||(u[1]=i=>a.value=i),placeholder:t.labelSearch,class:"smart-select-search"},null,8,V),[[e.vModelText,a.value]]),e.createElementVNode("ul",{class:"smart-select-list",onMousedown:u[2]||(u[2]=e.withModifiers(()=>{},["prevent"]))},[p().length===0?(e.openBlock(),e.createElementBlock("li",E,e.toDisplayString(t.labelNoItems),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p(),(i,S)=>(e.openBlock(),e.createElementBlock("li",{key:S,class:"smart-select-item"},[e.createElementVNode("button",{type:"button",class:"smart-select-item-btn",onMousedown:e.withModifiers(T=>b(i),["prevent"])},e.toDisplayString(i[t.keyLabel]),41,B)]))),128))],32)],512)):e.createCommentVNode("",!0)],32))}},g=h(M,[["__scopeId","data-v-2ffade35"]]),C={name:"SmartSelect",props:{options:{type:Array,default:()=>[]},keyLabel:{type:String,default:"title"},labelPlaceholder:{type:String,default:"لطفا یک گزینه انتخاب کنید"},labelSearch:{type:String,default:"جستجو ..."},labelNoItems:{type:String,default:"ایتمی برای نمایش وجود ندارد"},valueDefault:{type:Object,default:null}},data(){return{showSubMenu:!1,searchItem:"",labelItem:this.valueDefault?this.valueDefault[this.keyLabel]:"",valueItem:this.valueDefault}},computed:{filteredOptions(){return this.searchItem?this.options.filter(t=>t[this.keyLabel].toLowerCase().includes(this.searchItem.toLowerCase())):this.options}},methods:{setValueInput(t){this.labelItem=t[this.keyLabel],this.valueItem=t,this.searchItem="",this.$emit("selected",t),this.showSubMenu=!1},removeValueSelectItem(){this.labelItem="",this.searchItem="",this.valueItem=null,this.$emit("remove",null),this.showSubMenu=!1},onClickInput(){this.showSubMenu=!0},onClickOutside(t){!this.$refs.inputRef.contains(t.target)&&(!this.$refs.dropdownRef||!this.$refs.dropdownRef.contains(t.target))&&(this.showSubMenu=!1)}},mounted(){document.addEventListener("mousedown",this.onClickOutside)},beforeDestroy(){document.removeEventListener("mousedown",this.onClickOutside)}},L={class:"smart-select-input-wrapper"},N=["placeholder"],D={key:0,ref:"dropdownRef",class:"smart-select-dropdown"},_=["placeholder"],O={key:0,class:"no-items"},x=["onMousedown"];function R(t,l,o,c,s,a){return e.openBlock(),e.createElementBlock("form",{onSubmit:l[5]||(l[5]=e.withModifiers(()=>{},["prevent"])),class:"smart-select-form"},[e.createElementVNode("div",L,[e.withDirectives(e.createElementVNode("input",{ref:"inputRef",type:"text",readonly:"",placeholder:o.labelPlaceholder,"onUpdate:modelValue":l[0]||(l[0]=n=>s.labelItem=n),onClick:l[1]||(l[1]=(...n)=>a.onClickInput&&a.onClickInput(...n)),class:"smart-select-input"},null,8,N),[[e.vModelText,s.labelItem]]),s.labelItem?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",onClick:l[2]||(l[2]=(...n)=>a.removeValueSelectItem&&a.removeValueSelectItem(...n)),"aria-label":"حذف انتخاب",class:"smart-select-clear-btn"}," × ")):e.createCommentVNode("",!0)]),s.showSubMenu?(e.openBlock(),e.createElementBlock("div",D,[e.withDirectives(e.createElementVNode("input",{type:"search","onUpdate:modelValue":l[3]||(l[3]=n=>s.searchItem=n),placeholder:o.labelSearch,class:"smart-select-search"},null,8,_),[[e.vModelText,s.searchItem]]),e.createElementVNode("ul",{class:"smart-select-list",onMousedown:l[4]||(l[4]=e.withModifiers(()=>{},["prevent"]))},[a.filteredOptions.length===0?(e.openBlock(),e.createElementBlock("li",O,e.toDisplayString(o.labelNoItems),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.filteredOptions,(n,d)=>(e.openBlock(),e.createElementBlock("li",{key:d,class:"smart-select-item"},[e.createElementVNode("button",{type:"button",class:"smart-select-item-btn",onMousedown:e.withModifiers(m=>a.setValueInput(n),["prevent"])},e.toDisplayString(n[o.keyLabel]),41,x)]))),128))],32)],512)):e.createCommentVNode("",!0)],32)}const P=h(C,[["render",R],["__scopeId","data-v-f262eb8e"]]);exports.SmartSelectVue2=P;exports.SmartSelectVue3=g;
